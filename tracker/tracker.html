<!DOCTYPE html>
<html lang="en">
<head>
	<title>Membership</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->	
	<link rel="icon" type="image/png" href="images/icons/favicon.ico"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/perfect-scrollbar/perfect-scrollbar.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
<!--===============================================================================================-->
</head>
<body>
	

	
	<div class="limiter">

		<div class="container-table100">

			<div class="wrap-table100">
				<h1 id = "nameField">Name</h1>
				<h3 id = "pointsField"> Your Total Points: 0</h3>

					<div class="table" id = "table">

						<div class="row header">
							<div class="cell">
								Activity
							</div>
							<div class="cell">
								Date
							</div>
							<div class="cell">
								Points Available
							</div>
							<div class="cell">
								Points Earned
							</div>
						</div>
						
						<div class = "row" id = "tablebody"></div>
							
							<div class="row">
								<div class="cell" data-title="Activity">
									September Meeting
								</div>
								<div class="cell" data-title="Date">
									09/01/2020
								</div>
								<div class="cell" data-title="Points Available">
									5
								</div>
								<div class="cell" data-title="Points Earned">
									<input type = "text" id = "septmeeting">
								</div>
							</div>	
							<div class="row">
								<div class="cell" data-title="Activity">
									October Meeting
								</div>
								<div class="cell" data-title="Date">
									10/01/2020
								</div>
								<div class="cell" data-title="Points Available">
									5
								</div>
								<div class="cell" data-title="Points Earned">
									<input type = "text" id = "octmeeting">
								</div>
							</div>	
							<div class="row">
								<div class="cell" data-title="Activity">
									Parent's Meeting
								</div>
								<div class="cell" data-title="Date">
									10/01/2020
								</div>
								<div class="cell" data-title="Points Available">
									5
								</div>
								<div class="cell" data-title="Points Earned">
									<input type = "text" id = "parentmeeting">
								</div>
							</div>	
							<div class="row">
								<div class="cell" data-title="Activity">
									November Meeting
								</div>
								<div class="cell" data-title="Date">
									11/01/2020
								</div>
								<div class="cell" data-title="Points Available">
									5
								</div>
								<div class="cell" data-title="Points Earned">
									<input type = "text" id = "novmeeting">
								</div>
							</div>	
							<div class="row">
								<div class="cell" data-title="Activity">
									December Meeting
								</div>
								<div class="cell" data-title="Date">
									12/01/2020
								</div>
								<div class="cell" data-title="Points Available">
									5
								</div>
								<div class="cell" data-title="Points Earned">
									<input type = "text" id = "decmeeting">
								</div>
							</div>
							<div class="row">
								<div class="cell" data-title="Activity">
									RCE Participation
								</div>
								<div class="cell" data-title="Date">
									12/01/2020
								</div>
								<div class="cell" data-title="Points Available">
									5
								</div>
								<div class="cell" data-title="Points Earned">
									<input type = "text" id = "rce">
								</div>
							</div>
							<div class="row">
								<div class="cell" data-title="Activity">
									January Meeting
								</div>
								<div class="cell" data-title="Date">
									01/01/2021
								</div>
								<div class="cell" data-title="Points Available">
									5
								</div>
								<div class="cell" data-title="Points Earned">
									<input type = "text" id = "janmeeting">
								</div>
							</div>		
							<div class="row">
								<div class="cell" data-title="Activity">
									February Meeting
								</div>
								<div class="cell" data-title="Date">
									02/01/2021
								</div>
								<div class="cell" data-title="Points Available">
									5
								</div>
								<div class="cell" data-title="Points Earned">
									<input type = "text" id = "febmeeting">
								</div>
							</div>	
							<div class="row">
								<div class="cell" data-title="Activity">
									March Meeting
								</div>
								<div class="cell" data-title="Date">
									03/01/2021
								</div>
								<div class="cell" data-title="Points Available">
									5
								</div>
								<div class="cell" data-title="Points Earned">
									<input type = "text" id = "marmeeting">
								</div>
							</div>	
							<div class="row">
								<div class="cell" data-title="Activity">
									SLC Participation
								</div>
								<div class="cell" data-title="Date">
									03/01/2021
								</div>
								<div class="cell" data-title="Points Available">
									5
								</div>
								<div class="cell" data-title="Points Earned">
									<input type = "text" id = "slc">
								</div>
							</div>	
							<div class="row">
								<div class="cell" data-title="Activity">
									April Meeting
								</div>
								<div class="cell" data-title="Date">
									04/01/2021
								</div>
								<div class="cell" data-title="Points Available">
									5
								</div>
								<div class="cell" data-title="Points Earned">
									<input type = "text" id = "aprmeeting">
								</div>
							</div>	
							<div class="row">
								<div class="cell" data-title="Activity">
									May Meeting
								</div>
								<div class="cell" data-title="Date">
									05/01/2021
								</div>
								<div class="cell" data-title="Points Available">
									5
								</div>
								<div class="cell" data-title="Points Earned">
									<input type = "text" id = "maymeeting">
								</div>
							</div>	
							<div class="row">
								<div class="cell" data-title="Activity">
									March of Dimes
								</div>
								<div class="cell" data-title="Date">
									05/01/2021
								</div>
								<div class="cell" data-title="Points Available">
									10
								</div>
								<div class="cell" data-title="Points Earned">
									<input type = "text" id = "mod">
								</div>
							</div>	
							<div class="row">
								<div class="cell" data-title="Activity">
									June Meeting
								</div>
								<div class="cell" data-title="Date">
									06/01/2021
								</div>
								<div class="cell" data-title="Points Available">
									5
								</div>
								<div class="cell" data-title="Points Earned">
									<input type = "text" id = "junmeeting">
								</div>
							</div>	
							<button id = "submitButton" onclick="saveChanges()">Save Changes</button>
					</div>
			</div>
		</div>
	</div>

	<!-- The core Firebase JS SDK is always required and must be listed first -->
	<script src="https://www.gstatic.com/firebasejs/7.17.2/firebase-app.js"></script>

	<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.17.2/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.2/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.17.2/firebase-database.js"></script>
	
	<script>
	    // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyA4b4CbFFviZWCbc7NlIoS0snf85ip0iaQ",
            authDomain: "fbla-membership-tracker.firebaseapp.com",
            databaseURL: "https://fbla-membership-tracker.firebaseio.com",
            projectId: "fbla-membership-tracker",
            storageBucket: "fbla-membership-tracker.appspot.com",
            messagingSenderId: "64250080468",
            appId: "1:64250080468:web:8789ad51d5f91f599b1f41",
            measurementId: "G-V6N9YLF1NK"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
        const auth = firebase.auth();
        const database = firebase.database()

       
		var encoded = parent.document.URL.substring(parent.document.URL.indexOf('id=') + 3, parent.document.URL.length)
		var id = window.atob(encoded)
		
		var nameField = document.getElementById("nameField")
		var pointsField = document.getElementById("pointsField")

		database.ref('/').once('value', function(snapshot){
			snapshot.forEach(function(childSnapshot){
				var childData = childSnapshot.val()
				var totalPoints = 0

				nameField.innerText = childData['Name']
				totalPoints+=parseInt(document.getElementById("septmeeting").value = childData['Membership']['SeptemberMeeting']) || 0
				totalPoints+=parseInt(document.getElementById("octmeeting").value = childData['Membership']['OctoberMeeting']) || 0
				totalPoints+=parseInt(document.getElementById("novmeeting").value = childData['Membership']['NovemberMeeting']) || 0
				totalPoints+=parseInt(document.getElementById("decmeeting").value = childData['Membership']['DecemberMeeting']) || 0
				totalPoints+=parseInt(document.getElementById("janmeeting").value = childData['Membership']['JanuaryMeeting']) || 0
				totalPoints+=parseInt(document.getElementById("febmeeting").value = childData['Membership']['FebruaryMeeting']) || 0
				totalPoints+=parseInt(document.getElementById("marmeeting").value = childData['Membership']['MarchMeeting']) || 0
				totalPoints+=parseInt(document.getElementById("aprmeeting").value = childData['Membership']['AprilMeeting']) || 0
				totalPoints+=parseInt(document.getElementById("maymeeting").value = childData['Membership']['MayMeeting']) || 0
				totalPoints+=parseInt(document.getElementById("junmeeting").value = childData['Membership']['JuneMeeting']) || 0
				totalPoints+=parseInt(document.getElementById("parentmeeting").value = childData['Membership']['ParentMeeting']) || 0
				totalPoints+=parseInt(document.getElementById("rce").value = childData['Membership']['RCE']) || 0
				totalPoints+=parseInt(document.getElementById("slc").value = childData['Membership']['SLC']) || 0
				totalPoints+=parseInt(document.getElementById("mod").value = childData['Membership']['MOD']) || 0
				pointsField.innerText = "Total Points: " + totalPoints
			})
		})
		
		nameField.innerText = name

		function saveChanges(){
			database.ref(id + "/Membership").set({
				SeptemberMeeting: document.getElementById("septmeeting").value ,
				OctoberMeeting: document.getElementById("octmeeting").value ,
				NovemberMeeting: document.getElementById("novmeeting").value ,
				DecemberMeeting: document.getElementById("decmeeting").value ,
				JanuaryMeeting:document.getElementById("janmeeting").value ,
				FebruaryMeeting:document.getElementById("febmeeting").value ,
				MarchMeeting:document.getElementById("marmeeting").value ,
				AprilMeeting:document.getElementById("aprmeeting").value ,
				MayMeeting:document.getElementById("maymeeting").value ,
				JuneMeeting:document.getElementById("junmeeting").value ,
				ParentMeeting:document.getElementById("parentmeeting").value ,
				RCE:document.getElementById("rce").value ,
				SLC:document.getElementById("slc").value ,
				MOD:document.getElementById("mod").value 
			})
			
			alert("Your Membership Points have been saved Succesfully!")
			location.reload()
		}
	</script>

<!--===============================================================================================-->	
	<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/bootstrap/js/popper.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/select2/select2.min.js"></script>
<!--===============================================================================================-->
	<script src="js/main.js"></script>

</body>
</html>